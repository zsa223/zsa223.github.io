---
title: 일기 013
date: 2024-11-17 15:17:00 +0200
categories: [일기]
tags: [일기]
render_with_liquid: false
typora-root-url: ../
---

<div id="password-prompt">
    <h2>비밀번호를 입력해주세요:</h2>
    <input type="password" id="password" placeholder="비밀번호 입력">
    <button onclick="checkPassword()">확인</button>
</div>

<div id="protected-content" style="display: none;">
    <h2>비밀 게시글 내용</h2>
    <p id="encrypted-content">U2FsdGVkX1+8qfOZtxxl7kPlcM+tnjOa69UP8OrHCmU=</p> <!-- "0327"로 암호화된 콘텐츠 -->
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script>
    // 페이지 로드 시 저장된 비밀번호가 있는지 확인
    window.onload = function() {
        const savedPassword = localStorage.getItem('diaryPassword');
        if (savedPassword) {
            // 저장된 비밀번호로 복호화 시도
            const encryptedContent = document.getElementById("encrypted-content").innerText;
            const bytes = CryptoJS.AES.decrypt(encryptedContent, savedPassword);
            const decryptedContent = bytes.toString(CryptoJS.enc.Utf8);

            if (decryptedContent) {
                document.getElementById("protected-content").style.display = "block";
                document.getElementById("protected-content").innerHTML = `<h2>비밀 게시글 내용</h2><p>${decryptedContent}</p>`;
                document.getElementById("password-prompt").style.display = "none";
            }
        }
    };
    
    // 비밀번호 확인 함수
    function checkPassword() {
        const password = document.getElementById("password").value;
        const encryptedContent = document.getElementById("encrypted-content").innerText;
    
        try {
            // AES 복호화 시도
            const bytes = CryptoJS.AES.decrypt(encryptedContent, password);
            const decryptedContent = bytes.toString(CryptoJS.enc.Utf8);
            
            if (decryptedContent) {
                // 비밀번호가 맞으면 보호된 콘텐츠 표시
                document.getElementById("protected-content").style.display = "block";
                document.getElementById("protected-content").innerHTML = `<h2>비밀 게시글 내용</h2><p>${decryptedContent}</p>`;
                document.getElementById("password-prompt").style.display = "none";
    
                // 비밀번호를 localStorage에 저장
                localStorage.setItem('diaryPassword', password);
            } else {
                alert("비밀번호가 틀렸습니다. 다시 시도해주세요.");
            }
        } catch (e) {
            alert("비밀번호가 틀렸습니다. 다시 시도해주세요.");
        }
    }
</script>